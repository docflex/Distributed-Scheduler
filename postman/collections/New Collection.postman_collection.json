{
  "info": {
    "_postman_id": "41184c46-1af3-4b71-a20e-0f3d03ec9e58",
    "name": "Distributed Scheduler GraphQL API",
    "description": "Postman Collection for GraphQL endpoints of the Distributed Scheduler",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "28676303"
  },
  "item": [
    {
      "name": "Create Job",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"query\": \"mutation CreateJob($input: CreateJobInput!) { createJob(input: $input) { id name scheduleType status } }\",\n  \"variables\": {\n    \"input\": {\n      \"name\": \"Extract Number One\",\n      \"scheduleType\": \"CRON\",\n      \"cronExpression\": \"0/10 * * * * ?\",\n      \"payload\": {\n        \"type\": \"N/A\"\n      }\n    }\n  }\n}\n"
        },
        "url": {
          "raw": "{{baseURL}}/graphql",
          "host": [
            "{{baseURL}}"
          ],
          "path": [
            "graphql"
          ]
        }
      },
      "response": []
    },
    {
      "name": "List Jobs",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "let jobs = pm.response.json().data.jobs;",
              "let ids = jobs.map(j => j.id);",
              "",
              "pm.environment.set(\"jobIds\", JSON.stringify(ids));",
              "pm.environment.set(\"jobIndex\", 0);",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"query\": \"{ jobs { id name scheduleType status } }\"\n}\n"
        },
        "url": {
          "raw": "{{baseURL}}/graphql",
          "host": [
            "{{baseURL}}"
          ],
          "path": [
            "graphql"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Get Job By ID",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "exec": [
              "let raw = pm.environment.get(\"jobIds\");",
              "",
              "if (!raw) {",
              "    console.log(\"jobIds is missing in environment.\");",
              "    throw new Error(\"jobIds not found.\");",
              "}",
              "",
              "let ids = JSON.parse(raw);",
              "let index = Number(pm.environment.get(\"jobIndex\") || 0);",
              "",
              "// Stop if index > length",
              "if (index >= ids.length) {",
              "    console.log(\"No more IDs to process.\");",
              "    index = 0;",
              "    pm.environment.set(\"jobIndex\", 0);",
              "}",
              "",
              "let currentId = ids[index];",
              "pm.environment.set(\"currentJobId\", currentId);",
              "pm.environment.set(\"jobIndex\", index + 1);",
              "",
              "console.log(\"Using ID:\", currentId);",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"query\": \"query($id: ID!) { job(id: $id) { id name status scheduleType } }\",\n  \"variables\": { \"id\": \"{{currentJobId}}\" }\n}\n"
        },
        "url": {
          "raw": "{{baseURL}}/graphql",
          "host": [
            "{{baseURL}}"
          ],
          "path": [
            "graphql"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Pause Job By ID",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "exec": [
              "let raw = pm.environment.get(\"jobIds\");",
              "",
              "if (!raw) {",
              "    console.log(\"jobIds is missing in environment.\");",
              "    throw new Error(\"jobIds not found.\");",
              "}",
              "",
              "let ids = JSON.parse(raw);",
              "let index = Number(pm.environment.get(\"jobIndex\") || 0);",
              "",
              "// Stop if index > length",
              "if (index >= ids.length) {",
              "    console.log(\"No more IDs to process.\");",
              "    index = 0;",
              "    pm.environment.set(\"jobIndex\", 0);",
              "}",
              "",
              "let currentId = ids[index];",
              "pm.environment.set(\"currentJobId\", currentId);",
              "pm.environment.set(\"jobIndex\", index + 1);",
              "",
              "console.log(\"Using ID:\", currentId);",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"query\": \"mutation($id: ID!) { pauseJob(id: $id) { id name status } }\",\n  \"variables\": { \"id\": \"{{currentJobId}}\" }\n}\n"
        },
        "url": {
          "raw": "{{baseURL}}/graphql",
          "host": [
            "{{baseURL}}"
          ],
          "path": [
            "graphql"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Resume Job By ID",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "exec": [
              "let raw = pm.environment.get(\"jobIds\");",
              "",
              "if (!raw) {",
              "    console.log(\"jobIds is missing in environment.\");",
              "    throw new Error(\"jobIds not found.\");",
              "}",
              "",
              "let ids = JSON.parse(raw);",
              "let index = Number(pm.environment.get(\"jobIndex\") || 0);",
              "",
              "// Stop if index > length",
              "if (index >= ids.length) {",
              "    console.log(\"No more IDs to process.\");",
              "    index = 0;",
              "    pm.environment.set(\"jobIndex\", 0);",
              "}",
              "",
              "let currentId = ids[index];",
              "pm.environment.set(\"currentJobId\", currentId);",
              "pm.environment.set(\"jobIndex\", index + 1);",
              "",
              "console.log(\"Using ID:\", currentId);",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"query\": \"mutation($id: ID!) { resumeJob(id: $id) { id name status } }\",\n  \"variables\": { \"id\": \"{{currentJobId}}\" }\n}\n"
        },
        "url": {
          "raw": "{{baseURL}}/graphql",
          "host": [
            "{{baseURL}}"
          ],
          "path": [
            "graphql"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Run Job Now",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "exec": [
              "let raw = pm.environment.get(\"jobIds\");",
              "",
              "if (!raw) {",
              "    console.log(\"jobIds is missing in environment.\");",
              "    throw new Error(\"jobIds not found.\");",
              "}",
              "",
              "let ids = JSON.parse(raw);",
              "let index = Number(pm.environment.get(\"jobIndex\") || 0);",
              "",
              "// Stop if index > length",
              "if (index >= ids.length) {",
              "    console.log(\"No more IDs to process.\");",
              "    index = 0;",
              "    pm.environment.set(\"jobIndex\", 0);",
              "}",
              "",
              "let currentId = ids[index];",
              "pm.environment.set(\"currentJobId\", currentId);",
              "pm.environment.set(\"jobIndex\", index + 1);",
              "",
              "console.log(\"Using ID:\", currentId);",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"query\": \"mutation($id: ID!) { runJobNow(id: $id) }\",\n  \"variables\": { \"id\": \"{{currentJobId}}\" }\n}\n"
        },
        "url": {
          "raw": "{{baseURL}}/graphql",
          "host": [
            "{{baseURL}}"
          ],
          "path": [
            "graphql"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Get Job Logs",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"query\": \"query($id: ID!) { jobLogs(jobId: $id) { id fireTime status errorMessage } }\",\n  \"variables\": { \"id\": \"e43d198c-7dba-48d4-abb1-138f19d51ca8\" }\n}\n"
        },
        "url": {
          "raw": "{{baseURL}}/graphql",
          "host": [
            "{{baseURL}}"
          ],
          "path": [
            "graphql"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Delete Job By ID",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "exec": [
              "let raw = pm.environment.get(\"jobIds\");",
              "",
              "if (!raw) {",
              "    console.log(\"jobIds is missing in environment.\");",
              "    throw new Error(\"jobIds not found.\");",
              "}",
              "",
              "let ids = JSON.parse(raw);",
              "let index = Number(pm.environment.get(\"jobIndex\") || 0);",
              "",
              "// Stop if index > length",
              "if (index >= ids.length) {",
              "    console.log(\"No more IDs to process.\");",
              "    index = 0;",
              "    pm.environment.set(\"jobIndex\", 0);",
              "}",
              "",
              "let currentId = ids[index];",
              "pm.environment.set(\"currentJobId\", currentId);",
              "pm.environment.set(\"jobIndex\", index + 1);",
              "",
              "console.log(\"Using ID:\", currentId);",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"query\": \"mutation($id: ID!) { deleteJob(id: $id) }\",\n  \"variables\": { \"id\": \"{{currentJobId}}\" }\n}\n"
        },
        "url": {
          "raw": "{{baseURL}}/graphql",
          "host": [
            "{{baseURL}}"
          ],
          "path": [
            "graphql"
          ]
        },
        "description": "This request performs a GraphQL mutation to delete a job by its unique ID. \n\n- **Variable Required:** `id` (ID of the job to delete)\n- **Mutation Structure:**\n  ```graphql\n  mutation($id: ID!) {\n    deleteJob(id: $id) {\n      id\n      name\n      status\n    }\n  }\n  ```\n- **Usage Notes:**\n  - The `id` variable must be provided in the request body under `variables`.\n  - The response will include details of the deleted job if successful.\n  - Ensure you have the necessary permissions to delete jobs.\n\nUse this request to remove jobs from the system by specifying their unique identifier."
      },
      "response": []
    }
  ],
  "variable": [
    {
      "key": "baseURL",
      "value": "",
      "type": "default"
    }
  ]
}